= Korvet Observability

Reusable observability configuration for Korvet monitoring with Prometheus and Grafana.

== Contents

* `prometheus.yml` - Prometheus scrape configuration for Korvet metrics
* `grafana-datasources.yml` - Grafana datasource configuration (Prometheus)
* `grafana-dashboards.yml` - Grafana dashboard provisioning configuration
* `dashboards/korvet-dashboard.json` - Korvet performance dashboard

== Usage

This directory contains the canonical observability configuration used by all samples.

=== Using with Docker Compose

Include the observability stack in your `docker-compose.yml`:

[source,yaml]
----
include:
  - ../../observability/docker-compose.yml

services:
  redis:
    image: redis:latest
    ports:
      - "6379:6379"

  korvet:
    image: redisfield/korvet:latest
    ports:
      - "9092:9092"
      - "8080:8080"
    environment:
      - KORVET_REDIS_HOST=redis
      - KORVET_REDIS_METRICS_ENABLED=true
    depends_on:
      - redis
----

This automatically adds Prometheus (port 9090) and Grafana (port 3000) to your stack.

=== Accessing the Dashboard

1. Start your services: `docker compose up -d`
2. Open Grafana: http://localhost:3000
3. The Korvet dashboard loads automatically (no login required)

== Dashboard Metrics

The Korvet dashboard includes:

* **Message Rates**: Produce and fetch rates (messages/sec) using `irate()` for real-time metrics
* **Latency**: P50, P95, P99 latency percentiles for produce and fetch operations
* **Throughput**: Ingress and egress bytes/sec
* **Redis Metrics**: Command rates, latency percentiles, connection pool stats
* **JVM Metrics**: Heap usage, GC activity, thread counts

== Customization

To customize the dashboard:

1. Edit `dashboards/korvet-dashboard.json` directly, or
2. Import into Grafana, make changes via UI, then export and save back to this file
